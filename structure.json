{
  "public": {
    "index.html": "<!DOCTYPE html>\r\n<html lang=\"es\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>Búsqueda de Recetas - DofusDB</title>\r\n  <link rel=\"stylesheet\" href=\"css/style.css\">\r\n  <link rel=\"icon\" href=\"favicon.ico\" type=\"image/x-icon\">\r\n</head>\r\n<body>\r\n  <h1>Búsqueda de Recetas en DofusDB</h1>\r\n\r\n  <!-- Formulario de búsqueda -->\r\n  <form id=\"searchForm\">\r\n    <label for=\"objectName\">Nombre del objeto:</label>\r\n    <input type=\"text\" id=\"objectName\" placeholder=\"Buscar receta\" required>\r\n    <button type=\"submit\">Buscar</button>\r\n  </form>\r\n\r\n  <!-- Contenedor principal -->\r\n  <main>\r\n    <!-- Contenedor de resultados principales -->\r\n    <section id=\"results\">Introduce un nombre para buscar.</section>\r\n\r\n    <!-- Contenedor de detalles de la receta -->\r\n    <section id=\"recipeDetails\">\r\n      <h2 id=\"nombreObjeto\"></h2>\r\n    </section> <!-- Se cerró correctamente -->\r\n\r\n  </main>\r\n\r\n  <script src=\"js/app.js\" type=\"module\"></script>\r\n\r\n</body>\r\n</html>\r\n",
    "js": {
      "app.js": "// app.js\r\nimport \"./search.js\";\r\nimport \"./render.js\";\r\nimport \"./calculo.js\";\r\n\r\nconsole.log(\"Scripts cargados correctamente.\");\r\n",
      "calculo.js": "// calculo.js\r\nfunction calcularGanancia() {\r\n    let totalGasto = 0;\r\n    const cantidadFabricar = parseInt(document.getElementById(\"cantidadFabricar\").value) || 1;\r\n    const ingredientes = JSON.parse(document.getElementById(\"ingredientes\").dataset.ingredientes || \"[]\");\r\n  \r\n    let ingredientesTotalesHTML = \"\";\r\n  \r\n    ingredientes.forEach(ingrediente => {\r\n      const precioUnitario = parseFloat(document.getElementById(`precio-${ingrediente.id}`)?.value) || 0;\r\n      totalGasto += precioUnitario * ingrediente.quantity;\r\n  \r\n      // Calcular cantidad total de ingredientes requeridos\r\n      const cantidadTotal = ingrediente.quantity * cantidadFabricar;\r\n      ingredientesTotalesHTML += `\r\n        <li>\r\n          <img src=\"${ingrediente.image}\" alt=\"${ingrediente.name}\" style=\"width: 40px; height: 40px; vertical-align: middle;\" />\r\n          ${ingrediente.name}: <strong>${cantidadTotal}</strong> unidades\r\n        </li>\r\n      `;\r\n    });\r\n  \r\n    const precioObjeto = parseFloat(document.getElementById(\"precioObjeto\").value) || 0;\r\n    const ganancia = precioObjeto - totalGasto;\r\n    const gananciaTotal = ganancia * cantidadFabricar;\r\n  \r\n    document.getElementById(\"totalGasto\").textContent = totalGasto + \" K\";\r\n    document.getElementById(\"ganancia\").textContent = ganancia + \" K\";\r\n    document.getElementById(\"gananciaTotal\").textContent = gananciaTotal + \" K\";\r\n    document.getElementById(\"ingredientesTotales\").innerHTML = ingredientesTotalesHTML;\r\n  }\r\n  ",
      "render.js": "// render.js\r\nfunction renderRecipe(recipe) {\r\n    if (!recipe || recipe.length === 0) {\r\n      return \"<li>Receta no disponible</li>\";\r\n    }\r\n    return recipe.map(ingredient => `\r\n      <li>\r\n        <img src=\"${ingredient.image}\" alt=\"${ingredient.name}\" style=\"width: 40px; height: 40px; vertical-align: middle;\" />\r\n        ${ingredient.name} (Cantidad: ${ingredient.quantity || \"N/A\"})\r\n        <input type=\"number\" class=\"price-input\" id=\"precio-${ingredient.id}\" placeholder=\"Precio por unidad\" oninput=\"calcularGanancia()\">\r\n      </li>\r\n    `).join(\"\");\r\n  }\r\n  \r\n  function renderResults(item) {\r\n    resultsDiv.innerHTML = `\r\n      <h2>${item.name || \"Nombre no disponible\"}</h2>\r\n      \r\n      <h3>Precio de Venta:</h3>\r\n      <input type=\"number\" id=\"precioObjeto\" class=\"price-input\" placeholder=\"Ingrese precio\" oninput=\"calcularGanancia()\">\r\n  \r\n      <h3>Receta:</h3>\r\n      <ul id=\"ingredientes\">${renderRecipe(item.recipe)}</ul>\r\n  \r\n      <h3>Total Gasto: <span id=\"totalGasto\">0</span> K</h3>\r\n      <h3>Ganancia: <span id=\"ganancia\">0</span> K</h3>\r\n  \r\n      <label>Cantidad a fabricar:\r\n        <input type=\"number\" id=\"cantidadFabricar\" value=\"1\" min=\"1\" class=\"price-input\" oninput=\"calcularGanancia()\">\r\n      </label>\r\n  \r\n      <h3>Ganancia Total: <span id=\"gananciaTotal\">0</span> K</h3>\r\n  \r\n      <h3>Ingredientes Totales Necesarios:</h3>\r\n      <ul id=\"ingredientesTotales\"></ul>\r\n    `;\r\n  \r\n    document.getElementById(\"ingredientes\").dataset.ingredientes = JSON.stringify(item.recipe);\r\n  }\r\n  ",
      "search.js": "// search.js\r\nconst form = document.getElementById('searchForm');\r\nconst resultsDiv = document.getElementById('results');\r\n\r\nform.addEventListener(\"submit\", async (e) => {\r\n  e.preventDefault();\r\n\r\n  const objectName = document.getElementById(\"objectName\").value.trim();\r\n  console.log(\"Nombre del objeto enviado:\", objectName);\r\n\r\n  if (!objectName) {\r\n    resultsDiv.innerHTML =\r\n      '<p style=\"color: red;\">Por favor, ingresa el nombre de un objeto.</p>';\r\n    return;\r\n  }\r\n\r\n  try {\r\n    // Mostrar mensaje de búsqueda\r\n    resultsDiv.innerHTML = \"<p>Buscando...</p>\";\r\n\r\n    // Realizar la solicitud al servidor\r\n    const response = await fetch(\"/api/recipes/search\", {\r\n      method: \"POST\",\r\n      headers: { \"Content-Type\": \"application/json\" },\r\n      body: JSON.stringify({ objectName }),\r\n    });\r\n\r\n    // Parsear la respuesta JSON\r\n    const data = await response.json();\r\n\r\n    if (data.success && data.data) {\r\n      const item = data.data;\r\n      console.log(\"Datos recibidos del servidor:\", item);\r\n      \r\n      // Llamar a la función de renderizado\r\n      renderResults(item);\r\n    } else {\r\n      resultsDiv.innerHTML = \"<p>No se encontraron resultados para tu búsqueda.</p>\";\r\n      console.log(\"Respuesta sin datos:\", data);\r\n    }\r\n  } catch (error) {\r\n    console.error(\"Error en la búsqueda:\", error);\r\n    resultsDiv.innerHTML =\r\n      '<p style=\"color: red;\">Hubo un error al realizar la búsqueda. Inténtalo de nuevo más tarde.</p>';\r\n  }\r\n});\r\n"
    }
  }
}